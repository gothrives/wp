jQuery(document).ready(function(m){m(document.body).on("click",".um-user-bookmarks-add-button",function(){var o=m(this);wp.ajax.send("um_bookmarks_modal_content",{data:{bookmark_post:o.data("um_user_bookmarks_id")},success:function(o){m(".um-user-bookmarks-modal").show().find(".um-user-bookmarks-modal-content").html(o)},error:function(o){console.log(o)}})}),m(document.body).on("click",".um-user-bookmarks-remove-button",function(){var e=m(this),o=e.data("nonce"),r=e.data("post"),a=wp.hooks.applyFilters("um_bookmarks_remove_button_args",{bookmark_post:r,return_button:!0,_nonce:o});wp.ajax.send("um_bookmarks_remove",{data:a,success:function(o){e.attr("disabled",!0).html('<i class="um-user-bookmarks-ajax-loading"></i>'),m("body").find('[data-um_user_bookmarks_id="'+r+'"]').parents(".um-clear").last().html(o)},error:function(o){console.log(o)}})}),m(document.body).on("change",".um_user_bookmarks_old_folder-radio",function(){var o=m(this).parents("form"),e=o.find('[name="post_id"]').val(),r=wp.hooks.applyFilters("um_bookmarks_add_button_args",o.serialize());wp.ajax.send({data:r,success:function(o){m(".um-user-bookmarks-modal").hide(),m("body").find('[data-um_user_bookmarks_id="'+e+'"]').parents(".um-clear").last().html(o)},error:function(o){console.log(o)}})}),m(document.body).on("click",".um_user_bookmarks_create_folder_btn",function(o){o.preventDefault();var e=m(this),r=m(".um-user-bookmarks-modal");if(!e.hasClass("busy")){var a=e.parents("#form-um-new-folder-bookmark"),s=a.find('[name="_um_user_bookmarks_folder"]');if(a.find(".error").removeClass("error"),a.find(".error-message").hide(),""===m.trim(s.val()))return s.addClass("error"),void s.parent("td").find(".error-message").show();var n=a.find('[name="post_id"]').val(),t=e.html();e.addClass("busy").html("..."),a.find(".form-response").html("");var d=wp.hooks.applyFilters("um_bookmarks_add_button_args",a.serialize());wp.ajax.send({data:d,success:function(o){r.find("form").remove(),r.find(".um-user-bookmarks-modal-content").find(".um-user-bookmarks-modal-heading").remove(),r.find(".um-user-bookmarks-modal-content").append('<h1 style="text-align:center;"><i class="um-faicon-check"></i> '+wp.i18n.__("Successful","um-user-bookmarks")+"</h1>"),setTimeout(function(){m(".um-user-bookmarks-modal").hide()},1e3),m("body").find('[data-um_user_bookmarks_id="'+n+'"]').parents(".um-clear").last().html(o)},error:function(o){console.log(o),a.find(".form-response").html(o),e.removeClass("busy").html(t)}})}}),m(document.body).on("click",".um-user-bookmarks-profile-remove-link",function(){var e=m(this).css("cursor","wait"),o=e.data("nonce"),r=e.data("id");wp.ajax.send("um_bookmarks_remove",{data:{bookmark_post:r,_nonce:o},success:function(o){e.parents(".um-user-bookmarked-item").remove()},error:function(o){console.log(o)},complete:function(){e.css("cursor","pointer")}})}),m(document.body).on("click",".um-user-bookmarks-cancel-btn",function(){var o='<a href="javascript:void(0);" class="um-user-bookmarks-cancel-btn">&times;</a>'+wp.i18n.__("Loading..","um-user-bookmarks");m("body").find(".um-user-bookmarks-modal").hide().find(".um-user-bookmarks-modal-content").html(o)}),m(document.body).on("click","#um-bookmarks-profile-add-folder",function(){m(this).parents(".um-user-bookmarks-profile-add-folder-holder").find("form").toggleClass("show"),m(this).find("i.icon").toggleClass("um-faicon-angle-down um-faicon-angle-up")}),m(document.body).on("click",".um_user_bookmarks_profile_create_folder_btn",function(o){o.preventDefault();var e=m(this);if(!e.hasClass("busy")){var r=e.parents("#um-user-bookmarks-profile-add-folder-form"),a=r.find('[name="_um_user_bookmarks_folder"]');if(r.find(".error").removeClass("error"),r.find(".error-message").hide(),""===m.trim(a.val()))return a.addClass("error"),void a.parent(".um_bookmarks_td").find(".error-message").show();var s=e.html();e.addClass("busy").html("..."),r.find(".form-response").html(""),wp.ajax.send({data:r.serialize(),success:function(o){location.reload()},error:function(o){console.log(o),r.find(".form-response").html(o),e.removeClass("busy").html(s)}})}}),m(document.body).on("click",".um-user-bookmarks-folder, .um-user-bookmarks-folder-back",function(){var o=m(this),e=o.data("nonce"),r=o.data("profile"),a=o.data("folder_key"),s=o.parents(".um-profile-body");s.html('<div style="text-align:center;"><p class="um-user-bookmarks-ajax-loading"></p></div>'),wp.ajax.send("um_bookmarks_view_folder",{data:{key:a,profile_id:r,_nonce:e},success:function(o){s.html(o)},error:function(o){console.log(o)}})}),m(document.body).on("click",".um-user-bookmarks-folder-edit",function(){var o=m(this),e=o.data("folder_key"),r=o.data("profile"),a=o.data("nonce"),s=o.parents(".um-profile-body");s.html('<div style="text-align:center;"><p class="um-user-bookmarks-ajax-loading"></p></div>'),wp.ajax.send("um_bookmarks_view_edit_folder",{data:{key:e,user:r,_nonce:a},success:function(o){s.html(o)},error:function(o){console.log(o)}})}),m(document.body).on("click",".um-user-bookmarks-folder-delete",function(){var e=m(this),r=e.parents(".um-profile-body"),o=e.attr("data-alert_text");confirm(o)&&wp.ajax.send("um_bookmarks_delete_folder",{data:{key:e.data("folder_key"),_nonce:e.data("nonce")},success:function(o){r.html('<div style="text-align:center;"><p class="um-user-bookmarks-ajax-loading"></p></div>'),wp.ajax.send("um_bookmarks_get_folder_view",{data:{profile_id:e.data("profile"),_nonce:e.data("callback-nonce")},success:function(o){r.html(o)},error:function(o){console.log(o)}})},error:function(o){console.log(o)}})}),m(document.body).on("click",".um-user-bookmarks-back-btn",function(){var o=m(this),e=o.data("profile"),r=o.data("nonce"),a=o.parents(".um-profile-body");a.html('<div style="text-align:center;"><p class="um-user-bookmarks-ajax-loading"></p></div>'),wp.ajax.send("um_bookmarks_get_folder_view",{data:{profile_id:e,_nonce:r},success:function(o){a.html(o)},error:function(o){console.log(o)}})}),m(document.body).on("click",".um_user_bookmarks_action_folder_update",function(o){o.preventDefault();var e=m(this),r=e.parents("form.um-user-bookmarks-edit-folder-form"),a=r.find('[name="folder_title"]');if(r.find(".error-message").hide(),""!==m.trim(a.val())){var s=e.parents(".um-profile-body");wp.ajax.send({data:r.serialize(),success:function(o){s.find(".um-user-bookmarks-folder-back").data("folder_key",o.slug).trigger("click")},error:function(o){console.log(o),r.find(".form-response").html(o)}})}else a.parent("p").find(".error-message").show()}),m(document.body).on("click",".um-user-bookmarks-dropdown-hide",function(){return UM.dropdown.hideAll(),!1})});